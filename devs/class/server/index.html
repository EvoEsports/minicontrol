
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for MINIcontrol">
      
      
      
        <link rel="canonical" href="https://evoesports.github.io/minicontrol/devs/class/server/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Server - MINIcontrol Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#server-class" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="MINIcontrol Docs" class="md-header__button md-logo" aria-label="MINIcontrol Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MINIcontrol Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Server
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="MINIcontrol Docs" class="md-nav__button md-logo" aria-label="MINIcontrol Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MINIcontrol Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concept/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concept
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ui-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../forge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Users
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Users
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../users/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../users/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported events
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Supported events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-tmc-events-normalized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common TMC events (normalized)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-to-use-call-send-multicall-multisend" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to use call / send / multicall / multisend
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When to use call / send / multicall / multisend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tmcservercallmethod-args" class="md-nav__link">
    <span class="md-ellipsis">
      
        tmc.server.call(method, ...args)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmcserversendmethod-args" class="md-nav__link">
    <span class="md-ellipsis">
      
        tmc.server.send(method, ...args)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmcservermulticallcalls-method-args" class="md-nav__link">
    <span class="md-ellipsis">
      
        tmc.server.multicall(calls: [method, ...args][])
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmcservermultisendcalls-method-args" class="md-nav__link">
    <span class="md-ellipsis">
      
        tmc.server.multisend(calls: [method, ...args][])
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choosing-between-them" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choosing between them
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes &amp; best practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See also
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-initialization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication &amp; Initialization
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callscript-sendscript" class="md-nav__link">
    <span class="md-ellipsis">
      
        callScript / sendScript
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="callScript / sendScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tmcservercallscriptmethod-args" class="md-nav__link">
    <span class="md-ellipsis">
      
        tmc.server.callScript(method, ...args)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmcserversendscriptmethod-args" class="md-nav__link">
    <span class="md-ellipsis">
      
        tmc.server.sendScript(method, ...args)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addoverride-removeoverride" class="md-nav__link">
    <span class="md-ellipsis">
      
        addOverride / removeOverride
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listeners-addlistener-prependlistener-removelistener" class="md-nav__link">
    <span class="md-ellipsis">
      
        Listeners (addListener, prependListener, removeListener)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Listeners (addListener, prependListener, removeListener)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modescript-callbacks-normalization" class="md-nav__link">
    <span class="md-ellipsis">
      
        ModeScript callbacks &amp; normalization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModeScript callbacks &amp; normalization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitscriptcallbacks" class="md-nav__link">
    <span class="md-ellipsis">
      
        limitScriptCallbacks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<p><a href="../../concept/">Back to Concept</a></p>
<h1 id="server-class">Server class</h1>
<p>Server class is used to communicate with the game server itself.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#api">API</a><ul>
<li><a href="#when-to-use-call--send--multicall--multisend">call / send / multicall / multisend</a></li>
<li><a href="#callscript--sendscript">callScript / sendScript</a></li>
<li><a href="#addoverride--removeoverride">Override methods (addOverride / removeOverride)</a></li>
<li><a href="#listeners">Listeners (addListener / removeListener / prependListener)</a></li>
</ul>
</li>
<li><a href="#supported-events">Supported events</a></li>
<li><a href="#authentication--initialization">Authentication &amp; Initialization</a></li>
<li><a href="#mode-script-callbacks--normalization">Mode Script Callbacks &amp; Normalization</a></li>
<li><a href="#limitscriptcallbacks">limitScriptCallbacks</a></li>
<li><a href="#notes--best-practices">Notes &amp; best practices</a></li>
</ul>
<h2 id="api">API</h2>
<p>The calls you can interact with the server:</p>
<div class="language-ts highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">class</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="c1">// call a xmlrpc method for server and WAIT for answer</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">call</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">params</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="c1">// shorthand method to call script</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">callScript</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">...args</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">);</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="c1">// perform multicall for dedicated server and WAIT for answer</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">multicall</span><span class="p">([</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="p">[</span><span class="nx">method</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">params</span><span class="p">],</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">        </span><span class="p">[</span><span class="nx">method</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">params</span><span class="p">]</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span><span class="p">])</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">[];</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="c1">// just send and ignore everything else</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="nx">send</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">params</span><span class="p">)</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="c1">// add override</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">addOverride</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="o">:</span><span class="w"> </span><span class="kt">Function</span><span class="p">);</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="nx">removeOverride</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">);</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="c1">// add listener / remove listener</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">    </span><span class="nx">addListener</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">,</span><span class="w"> </span><span class="nx">obj?</span><span class="o">:</span><span class="w"> </span><span class="kt">object</span><span class="p">);</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">    </span><span class="nx">prependListener</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">,</span><span class="w"> </span><span class="nx">obj?</span><span class="o">:</span><span class="w"> </span><span class="kt">object</span><span class="p">);</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="nx">removeListener</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">);</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">    </span><span class="nx">emit</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">...args</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">[]);</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="supported-events">Supported events</h2>
<p>To make everything working with all generations of the games, some things had to changed.
Callbacks starting with: <code>TrackMania.</code> and  <code>ManiaPlanet.</code> are all renamed to start with <code>Trackmania.</code> Custom events that should be used instead of the native ones:</p>
<div class="language-ts highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// async onPlayerConnect(player: Player) {}</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.PlayerConnect&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onPlayerConnect</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1">// async onPlayerDisconnect(player: Player) {}</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.PlayerDisconnect&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onPlayerDisconnect</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1">// async onPlayerCheckpoint(login:string, racetime:int, checkpointinrace:int) {}</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.PlayerCheckpoint&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onPlayerCheckpoint</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c1">// async onPlayerFinish(login:string, time:int) {}</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.PlayerFinish&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">finish</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="c1">// async onPlayerGiveup() {}</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.PlayerGiveup&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">giveup</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="c1">//  onVoteCancel(data: VoteStruct) {}</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.Vote.Cancel&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">voteCancel</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c1">//  onVoteDeny(data: VoteStruct) {}</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.Vote.Deny&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">voteDeny</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="c1">//  onVotePass(data: VoteStruct) {}</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;TMC.Vote.Pass&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">votePass</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="c1">// generic ones use this callbacks</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;Trackmania.*&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="common-tmc-events-normalized">Common TMC events (normalized)</h3>
<p>MINIcontrol normalizes (and exposes) common dedicated server callbacks via the <code>TMC.</code> namespace. Plugins should prefer these events over raw <code>Trackmania.</code> or <code>ManiaPlanet.</code> callbacks:</p>
<ul>
<li><code>TMC.PlayerConnect</code> - Emitted with a <code>Player</code> object when a player connects; plugin typically fetches player details with <code>await tmc.players.getPlayer(login)</code>.</li>
<li><code>TMC.PlayerDisconnect</code> - Emitted with a <code>Player</code> object when a player disconnects.</li>
<li><code>TMC.PlayerCheckpoint</code> - Emitted with: <code>(login: string, racetime: number, checkpointIndex: number, rawData?)</code>.</li>
<li><code>TMC.PlayerFinish</code> - Emitted with: <code>(login: string, racetime: number)</code> when a player finishes.</li>
<li><code>TMC.PlayerGiveup</code> - Emitted when a player gives up.</li>
<li><code>TMC.BeginMap</code> or <code>Trackmania.BeginMap</code> - Emitted when a new map begins; data includes the new map object.</li>
<li><code>TMC.BeginRound</code> / <code>Trackmania.BeginRound</code> - Emitted when a round begins (useful for per-round timers).</li>
<li><code>TMC.MapListModified</code> - Emitted when the server's maplist changed.</li>
<li><code>TMC.Vote.Cancel</code>, <code>TMC.Vote.Deny</code>, <code>TMC.Vote.Pass</code> - Vote lifecycle events (payload depends on server call signature).</li>
</ul>
<p>These <code>TMC.</code> events are safe across games and provide a uniform payload for plugin authors.</p>
<h2 id="when-to-use-call-send-multicall-multisend">When to use call / send / multicall / multisend</h2>
<p>Server interactions generally fall into two categories:</p>
<ul>
<li>Blocking calls that expect a response (use <code>call</code>/<code>multicall</code>).</li>
<li>Fire-and-forget sends where no response is needed (use <code>send</code>/<code>multisend</code>).</li>
</ul>
<h3 id="tmcservercallmethod-args"><code>tmc.server.call(method, ...args)</code></h3>
<ul>
<li>Use when you need a return value or must wait for the action to complete. This is the most commonly used method when fetching data or waiting for server results.</li>
<li>Example:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">currentMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">&#39;GetCurrentMapInfo&#39;</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<h3 id="tmcserversendmethod-args"><code>tmc.server.send(method, ...args)</code></h3>
<ul>
<li>Use to dispatch a command without waiting for a response. Useful for UI updates and commands where the result doesn't matter.</li>
<li>Example:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;SendDisplayManialinkPage&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">xml</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<h3 id="tmcservermulticallcalls-method-args"><code>tmc.server.multicall(calls: [method, ...args][])</code></h3>
<ul>
<li>Batch multiple <code>call</code> requests into a single round-trip and obtain an array of responses. Use this for efficiency and to avoid many separate <code>call</code> invocations.</li>
<li>Example:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">calls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;GetMapInfo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;some.gbx&#39;</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;GetMapInfo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;another.gbx&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">];</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">multicall</span><span class="p">(</span><span class="nx">calls</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<h3 id="tmcservermultisendcalls-method-args"><code>tmc.server.multisend(calls: [method, ...args][])</code></h3>
<ul>
<li>Batch multiple <code>send</code> operations in a single request without expecting responses. Use this when you want to send many fire-and-forget commands.</li>
<li>Example:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">calls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;SendDisplayManialinkPageToLogin&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">login</span><span class="p">,</span><span class="w"> </span><span class="nx">xml</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">],</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">multisend</span><span class="p">(</span><span class="nx">calls</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<h3 id="choosing-between-them">Choosing between them</h3>
<ul>
<li>When you need a result: use <code>call</code> or <code>multicall</code>.</li>
<li>When you just need to trigger a server action and don't need the result: use <code>send</code> or <code>multisend</code>.</li>
<li>Use <code>multicall</code>/<code>multisend</code> to group calls for performance when issuing many calls in quick succession.</li>
</ul>
<h2 id="notes-best-practices">Notes &amp; best practices</h2>
<p>Here are general recommendations when interacting with the server and writing plugins:</p>
<ul>
<li>
<p>Use <code>call</code> when you need a response, and always await it inside try/catch to handle server errors:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">&#39;GetMapInfo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;myMap.Gbx&#39;</span><span class="p">);</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">cli</span><span class="p">(</span><span class="sb">`Error fetching map info: </span><span class="si">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="p">}</span>
</span></code></pre></div></p>
</li>
<li>
<p>Use <code>send</code> for fire-and-forget operations. If the server call might fail silently, consider using <code>call</code> to confirm status.</p>
</li>
<li>
<p>Prefer <code>multicall</code>/<code>multisend</code> when dealing with many calls: they reduce latency and server round-trips.</p>
</li>
<li>
<p>Avoid blocking work in event listeners; perform heavy work asynchronously and avoid long-running synchronous tasks.</p>
</li>
<li>
<p>When using <code>addListener</code>, provide the bound object (third parameter) and use <code>removeListener</code> with the same callback to avoid leaks.</p>
</li>
<li>
<p>Use <code>addOverride</code>/<code>removeOverride</code> in tests or temporary runtime emulation, and always remove overrides to restore original behavior.</p>
</li>
<li>
<p>For script-related operations (callScript), supply sensible timeouts and fallback logic as script methods can hang or time out.</p>
</li>
<li>
<p>Respect game-specific differences (e.g., <code>Trackmania</code> vs <code>TmForever</code> replacements) and use <code>tmc.server.fetchServerInfo()</code> to detect the game and adjust logic.</p>
</li>
</ul>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="../gbx/">GBX Client (XML-RPC transport)</a></li>
<li><a href="../minicontrol/">MiniControl (tmc) runtime API</a></li>
<li><a href="/documentation/devs/class/uimanager.md">UiManager</a> (examples of efficient multisend usage)</li>
</ul>
<h2 id="authentication-initialization">Authentication &amp; Initialization</h2>
<p>MiniControl uses the following sequence to initialize a running server connection:</p>
<ol>
<li><code>tmc.server.connect(host, port)</code> — Connect to the remote XML-RPC/GBX server.</li>
<li><code>tmc.server.call('Authenticate', user, pass)</code> — Authenticate as a SuperAdmin account.</li>
<li><code>tmc.server.fetchServerInfo()</code> — Helper to populate local <code>tmc.server.version</code>, <code>tmc.server.packmask</code>, <code>tmc.server.login</code> and <code>tmc.server.name</code> values. It calls several API methods internally (GetMainServerPlayerInfo, GetServerOptions, GetVersion etc.).</li>
<li>Enable callbacks &amp; configure API version depending on the game type (<code>Trackmania</code>, <code>TmForever</code>, <code>ManiaPlanet</code>).</li>
</ol>
<p>Example minimal initialization (already handled by MiniControl core):
<div class="language-ts highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">connected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">5000</span><span class="p">);</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">&#39;Authenticate&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SuperAdmin&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SuperAdmin&#39;</span><span class="p">);</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">fetchServerInfo</span><span class="p">();</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1">// enable callbacks (core sets relevant flags automatically)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;EnableCallbacks&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
</span></code></pre></div></p>
<p>Notes:
- MiniControl will attempt to set the correct API version for <code>Trackmania</code> / <code>ManiaPlanet</code> to ensure compatibility.
- It also updates <code>tmc.mapsPath</code> (games use different API names: <code>GetMapsDirectory</code> vs <code>GetTracksDirectory</code> for TmForever) and optionally toggles <code>XmlRpc.EnableCallbacks</code> via <code>sendScript()</code>.</p>
<h2 id="callscript-sendscript">callScript / sendScript</h2>
<h3 id="tmcservercallscriptmethod-args"><code>tmc.server.callScript(method, ...args)</code></h3>
<ul>
<li>A helper to invoke a ModeScript/ManiaScript function and wait for its result via events.</li>
<li>Implementation detail: <code>callScript</code> issues the script call and returns a promise which resolves once the script emits the associated callback event (the server emits an event corresponding to the script response). A timeout is used to prevent infinite waits.</li>
<li>Example:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// Call a script function and capture result</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">callScript</span><span class="p">(</span><span class="s1">&#39;GetPlayersWithProperty&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;someProperty&#39;</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<h3 id="tmcserversendscriptmethod-args"><code>tmc.server.sendScript(method, ...args)</code></h3>
<ul>
<li>Similar to <code>callScript</code> but fire-and-forget. The caller doesn't wait for a response event. Useful for scripts that don't return a value.
<div class="language-ts highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// Just send a script call</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">await</span><span class="w"> </span><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">sendScript</span><span class="p">(</span><span class="s1">&#39;XmlRpc.EnableCallbacks&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;true&#39;</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<h2 id="addoverride-removeoverride">addOverride / removeOverride</h2>
<p>These helpers let you intercept GBX method calls and provide custom implementations; this is useful for testing, emulation, or interception.</p>
<p>Example:
<div class="language-ts highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addOverride</span><span class="p">(</span><span class="s1">&#39;GetMapInfo&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="c1">// provide a stubbed response or forward to a custom handler</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">UId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;stub&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Stubbed map&#39;</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">});</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1">// To restore normal behavior</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">removeOverride</span><span class="p">(</span><span class="s1">&#39;GetMapInfo&#39;</span><span class="p">);</span>
</span></code></pre></div></p>
<h2 id="listeners-addlistener-prependlistener-removelistener">Listeners (addListener, prependListener, removeListener)</h2>
<ul>
<li><code>addListener(method, callback, obj)</code> binds and registers a listener wrapper that stores the original callback in <code>wrapper.listener</code> (so <code>removeListener</code> can find and remove it cleanly). Use it to bind server events and ensure you can remove them reliably.</li>
<li><code>prependListener</code> puts the listener at the beginning of the listener list.</li>
<li><code>removeListener</code> removes the listener and any wrapper with <code>wrapper.listener === callback</code>.</li>
</ul>
<h3 id="example">Example</h3>
<div class="language-ts highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// Register</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s1">&#39;TMC.PlayerConnect&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onPlayerConnect</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1">// Remove</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nx">tmc</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s1">&#39;TMC.PlayerConnect&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onPlayerConnect</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="modescript-callbacks-normalization">ModeScript callbacks &amp; normalization</h2>
<p>MiniControl normalizes differences between various Trackmania server versions. Key points:</p>
<ul>
<li>Many events are delivered via ModeScript callbacks (e.g., <code>ModeScriptCallbackArray</code> or <code>Trackmania.ModeScriptCallbackArray</code>). MiniControl turns these into unified <code>TMC.*</code> events.</li>
<li>The core <code>onCallback</code> implementation in <code>core/server.ts</code> normalizes method names (e.g., <code>ManiaPlanet.</code> -&gt; <code>Trackmania.</code> and <code>Challenge</code> -&gt; <code>Map</code>) and emits <code>TMC.*</code> events for listeners.</li>
</ul>
<p>Example: <code>ModeScriptCallbackArray</code> for waypoint or other race events is converted into <code>TMC.PlayerFinish</code>, <code>TMC.PlayerCheckpoint</code> etc.</p>
<h3 id="limitscriptcallbacks">limitScriptCallbacks</h3>
<p><code>tmc.server.limitScriptCallbacks()</code> is a helper used during initialization (for <code>Trackmania</code> / <code>ManiaPlanet</code>) to restrict which ModeScript callbacks scripts can call. This reduces the number of script callbacks the server has to process and helps prevent callback flooding (especially when many plugins or scripts register events).</p>
<p>What it does:
- Fetches the list of registered script callbacks via <code>XmlRpc.GetCallbacksList</code>.
- Blocks non-essential callbacks and only enables those required for typical behaviors (start/end events, certain game events).
- Logs the list of enabled callbacks and the reduction it achieved.</p>
<p>Use case:
- Enable by default in production to reduce server overhead. You can control behavior by setting <code>XMLRPC_LIMIT_SCRIPT_CALLBACKS</code> env var.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/EvoEsports/minicontrol" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>